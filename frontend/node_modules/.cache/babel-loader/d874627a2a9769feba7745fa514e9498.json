{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import AddCategoryModal from\"../components/AddCategoryModal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoriesIncome=()=>{const[showModal,setShowModal]=useState(false);const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[editData,setEditData]=useState(null);const fetchCategories=async()=>{try{const res=await axios.get(\"http://localhost:5000/api/categories/income\");setCategories(res.data);}catch(err){console.error(err);}finally{setLoading(false);}};useEffect(()=>{fetchCategories();},[]);const handleDelete=async id=>{if(!window.confirm(\"Are you sure you want to delete this category?\"))return;try{await axios.delete(\"http://localhost:5000/api/categories/\".concat(id));fetchCategories();// refresh list\n}catch(err){alert(\"Failed to delete category\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"content-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Income categories\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb float-sm-right\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",children:\"Categories\"}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",children:\"Income - categories\"})]})})]})})}),/*#__PURE__*/_jsx(\"section\",{className:\"content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"List of income categories\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 text-right\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-3\",onClick:()=>setShowModal(true),children:\"Add Income Category\"}),/*#__PURE__*/_jsx(AddCategoryModal,{show:showModal,onClose:()=>{setShowModal(false);setEditData(null);fetchCategories();// ðŸ”¥ refresh list\n},type:\"income\",editData:editData})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:50},children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Color Code\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:150},children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center\",children:\"Loading...\"})}):categories.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center\",children:\"No categories found\"})}):categories.map((cat,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:cat.category_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{backgroundColor:cat.category_color,color:\"#fff\"},children:cat.category_color})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-warning mr-2\",onClick:()=>{setEditData(cat);setShowModal(true);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleDelete(cat.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},cat.id))})]})})]})})})})})]});};export default CategoriesIncome;","map":{"version":3,"names":["React","useState","useEffect","axios","AddCategoryModal","jsx","_jsx","jsxs","_jsxs","CategoriesIncome","showModal","setShowModal","categories","setCategories","loading","setLoading","editData","setEditData","fetchCategories","res","get","data","err","console","error","handleDelete","id","window","confirm","delete","concat","alert","className","children","href","onClick","show","onClose","type","style","width","colSpan","length","map","cat","index","category_name","backgroundColor","category_color","color"],"sources":["C:/wamp64/www/react-app/my-money/frontend/src/pages/CategoriesIncome.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport AddCategoryModal from \"../components/AddCategoryModal\";\r\n\r\nconst CategoriesIncome = () => {\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editData, setEditData] = useState(null);\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(\r\n        \"http://localhost:5000/api/categories/income\"\r\n      );\r\n      setCategories(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this category?\")) return;\r\n\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/categories/${id}`);\r\n      fetchCategories(); // refresh list\r\n    } catch (err) {\r\n      alert(\"Failed to delete category\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"content-wrapper\">\r\n      <section className=\"content-header\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row mb-2\">\r\n            <div className=\"col-md-6\">\r\n              <h1>Income categories</h1>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <ol className=\"breadcrumb float-sm-right\">\r\n                <li className=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\r\n                <li className=\"breadcrumb-item active\">Categories</li>\r\n                <li className=\"breadcrumb-item active\">Income - categories</li>\r\n              </ol>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section className=\"content\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                  <div className='row'>\r\n                    <div className='col-md-6'><h3 className=\"card-title\">List of income categories</h3></div>\r\n                    <div className='col-md-6 text-right'>\r\n                      <button\r\n                        className=\"btn btn-primary mb-3\"\r\n                        onClick={() => setShowModal(true)}\r\n                      >\r\n                        Add Income Category\r\n                      </button>\r\n                      <AddCategoryModal\r\n                        show={showModal}\r\n                        onClose={() => {\r\n                          setShowModal(false);\r\n                          setEditData(null);\r\n                          fetchCategories(); // ðŸ”¥ refresh list\r\n                        }}\r\n                        type=\"income\"\r\n                        editData={editData}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <table className=\"table table-bordered\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th style={{ width: 50 }}>#</th>\r\n                        <th>Category Name</th>\r\n                        <th>Color Code</th>\r\n                        <th style={{ width: 150 }}>Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {loading ? (\r\n                        <tr>\r\n                          <td colSpan=\"4\" className=\"text-center\">Loading...</td>\r\n                        </tr>\r\n                      ) : categories.length === 0 ? (\r\n                        <tr>\r\n                          <td colSpan=\"4\" className=\"text-center\">No categories found</td>\r\n                        </tr>\r\n                      ) : (\r\n                        categories.map((cat, index) => (\r\n                          <tr key={cat.id}>\r\n                            <td>{index + 1}</td>\r\n                            <td>{cat.category_name}</td>\r\n                            <td>\r\n                              <span\r\n                                className=\"badge\"\r\n                                style={{ backgroundColor: cat.category_color, color: \"#fff\" }}\r\n                              >\r\n                                {cat.category_color}\r\n                              </span>\r\n                            </td>\r\n                            <td>\r\n                              <button\r\n                                className=\"btn btn-sm btn-warning mr-2\"\r\n                                onClick={() => {\r\n                                  setEditData(cat);\r\n                                  setShowModal(true);\r\n                                }}\r\n                              >\r\n                                <i className=\"fas fa-edit\"></i>\r\n                              </button>\r\n\r\n                              <button\r\n                                className=\"btn btn-sm btn-danger\"\r\n                                onClick={() => handleDelete(cat.id)}\r\n                              >\r\n                                <i className=\"fas fa-trash\"></i>\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n\r\n  )\r\n}\r\nexport default CategoriesIncome;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}